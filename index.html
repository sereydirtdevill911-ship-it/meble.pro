<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Konfigurator PRO 2.2 – FIXED BASE</title>

<style>
body{font-family:Arial;background:#eef1f5;margin:0;padding:20px;}
.container{max-width:900px;margin:auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,0.1);}
h1{background:#1f2d3d;color:white;padding:15px;border-radius:8px;text-align:center;}
label{font-weight:bold;}
select,input{width:100%;padding:8px;margin:6px 0 14px;border-radius:6px;border:1px solid #ccc;}
button{width:100%;padding:10px;margin-top:8px;border:none;border-radius:6px;font-weight:bold;color:white;cursor:pointer;}
.primary{background:#2f5bd3;}
.secondary{background:#777;}
.danger{background:#c0392b;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #ddd;padding:6px;text-align:left;font-size:14px;}
th{background:#f0f0f0;}
.warning{color:red;font-weight:bold;}
</style>
</head>
<body>

<div class="container">
<h1>Konfigurator PRO 2.2 – FIXED BASE</h1>

<label>Typ korpusu</label>
<select id="type" onchange="autoLogic()">
<option>Dolna</option>
<option>Dolna GOLA</option>
<option>Wisząca</option>
<option>Pod zmywarkę</option>
<option>Pod lodówkę</option>
</select>

<label>Konstrukcja</label>
<select id="config" onchange="updateQtyState()">
<option>Drzwi</option>
<option>Szuflady</option>
</select>

<label>System szuflad</label>
<select id="system">
<option>Antaro</option>
<option>Merivobox</option>
</select>

<label>Typ boków</label>
<select id="drawerType">
<option value="N">N</option>
<option value="M" selected>M</option>
<option value="C">C</option>
<option value="D">D</option>
</select>

<label>Wysokość (mm)</label>
<input type="number" id="height" value="720" min="200" max="3000">

<label>Szerokość (mm)</label>
<input type="number" id="width" value="600" min="300" max="1200">

<label>Głębokość (mm)</label>
<input type="number" id="depth" value="560" min="300" max="800">

<label>Długość prowadnicy</label>
<select id="runner" onchange="autoRunnerCheck()">
<option>450</option>
<option selected>500</option>
<option>550</option>
<option>600</option>
</select>

<label>Ilość szuflad</label>
<input type="number" id="qty" value="3" min="1" max="10">

<button class="primary" onclick="calculate()">Oblicz</button>
<button class="secondary" onclick="resetForm()">Reset</button>
<button class="danger" onclick="clearResult()">Wyczyść</button>

<div id="result"></div>
</div>

<script>

/* ===== LOCK CONTROL ===== */

function autoLogic(){

let t=type.value;

/* unlock */
height.readOnly=false;
depth.readOnly=false;
config.disabled=false;
runner.disabled=false;
system.disabled=false;
drawerType.disabled=false;

/* DOLNA */
if(t==="Dolna" || t==="Dolna GOLA"){
height.value=720;
depth.value=560;
}

/* WISZĄCA */
if(t==="Wisząca"){
height.value=720;
depth.value=320;

height.readOnly=true;
depth.readOnly=true;

config.value="Drzwi";
config.disabled=true;

runner.disabled=true;
system.disabled=true;
drawerType.disabled=true;
}

/* ZMYWARKA */
if(t==="Pod zmywarkę"){
height.value=720;
depth.value=560;

height.readOnly=true;
depth.readOnly=true;

config.value="Drzwi";
config.disabled=true;

runner.disabled=true;
system.disabled=true;
drawerType.disabled=true;
}

/* LODÓWKA */
if(t==="Pod lodówkę"){
height.value=2130;
depth.value=600;

height.readOnly=true;
depth.readOnly=true;

config.value="Drzwi";
config.disabled=true;

runner.disabled=true;
system.disabled=true;
drawerType.disabled=true;
}

updateQtyState();
}

/* ===== QTY CONTROL ===== */

function updateQtyState(){
qty.disabled = config.value !== "Szuflady";
}

/* ===== SYSTEM LOGIC ===== */

function getSystemOffset(system){
if(system==="Merivobox") return 42;
return 38;
}

function getBackHeight(type){
if(type==="N") return 68;
if(type==="M") return 84;
if(type==="C") return 148;
if(type==="D") return 196;
return 84;
}

/* ===== RUNNER CONTROL ===== */

function autoRunnerCheck(){
let d=parseInt(depth.value);
let r=parseInt(runner.value);

if(d < r + 20){
alert("Minimalna głębokość dla prowadnicy "+r+" mm to "+(r+20)+" mm.");
runner.value=450;
}
}

/* ===== CALCULATION CORE ===== */

function calculate(){

let h=parseInt(height.value);
let w=parseInt(width.value);
let d=parseInt(depth.value);
let runnerValue=parseInt(runner.value);
let qtyValue=parseInt(qty.value);
let systemValue=system.value;
let drawerTypeValue=drawerType.value;
let configValue=config.value;
let typeValue=type.value;

let light=w-36;
let golaOffset=(typeValue==="Dolna GOLA")?50:0;
let offset=getSystemOffset(systemValue);

let output="<h2>Wynik</h2><table>";
output+="<tr><th>Element</th><th>Wymiar</th></tr>";

/* KONTROLA RUNNER */
if(configValue==="Szuflady"){
if(d < runnerValue + 20){
output+="<tr><td class='warning'>BŁĄD</td><td>Za mała głębokość pod prowadnicę</td></tr></table>";
result.innerHTML=output;
return;
}
}

/* KORPUS */
output+="<tr><td>Bok</td><td>"+h+" x "+d+" x 18</td></tr>";
output+="<tr><td>Dno</td><td>"+light+" x "+d+" x 18</td></tr>";
output+="<tr><td>Wieniec</td><td>"+light+" x "+d+" x 18</td></tr>";
output+="<tr><td>Plecy</td><td>"+(w-2)+" x "+(h-2)+" x 3</td></tr>";

/* DRZWI */
if(configValue==="Drzwi"){
output+="<tr><td>Front</td><td>"+(w-4)+" x "+(h-4-golaOffset)+" x 18</td></tr>";
}

/* SZUFLADY */
if(configValue==="Szuflady"){

let frontHeight=Math.floor((h-golaOffset-((qtyValue+1)*3))/qtyValue)-4;

if(frontHeight < 60){
output+="<tr><td class='warning'>BŁĄD</td><td>Za dużo szuflad</td></tr></table>";
result.innerHTML=output;
return;
}

let dnoWidth=light-offset;
let backHeight=getBackHeight(drawerTypeValue);

for(let i=1;i<=qtyValue;i++){
output+="<tr><td>Front "+i+"</td><td>"+(w-4)+" x "+frontHeight+" x 18</td></tr>";
output+="<tr><td>Tył "+i+"</td><td>"+dnoWidth+" x "+backHeight+" x 16</td></tr>";
output+="<tr><td>Dno "+i+"</td><td>"+dnoWidth+" x "+runnerValue+" x 16</td></tr>";
}
}

output+="</table>";
result.innerHTML=output;
}

function resetForm(){
type.value="Dolna";
config.value="Drzwi";
system.value="Antaro";
drawerType.value="M";
height.value=720;
width.value=600;
depth.value=560;
runner.value=500;
qty.value=3;
result.innerHTML="";
autoLogic();
}

function clearResult(){
result.innerHTML="";
}

autoLogic();

</script>
</body>
</html>
