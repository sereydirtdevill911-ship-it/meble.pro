<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Konfigurator PRO 6.3.3 – ABSOLUTE STABLE</title>

<style>
body{font-family:Arial;background:#eef1f5;margin:0;padding:20px;}
.container{max-width:1150px;margin:auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,0.1);}
h1{background:#1f2d3d;color:white;padding:15px;border-radius:8px;text-align:center;}
label{font-weight:bold;}
select,input{width:100%;padding:8px;margin:6px 0 14px;border-radius:6px;border:1px solid #ccc;}
button{width:100%;padding:10px;margin-top:8px;border:none;border-radius:6px;font-weight:bold;color:white;cursor:pointer;}
.primary{background:#2f5bd3;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #ddd;padding:6px;text-align:left;font-size:14px;}
th{background:#f0f0f0;}
.warning{color:red;font-weight:bold;}
.drawerBlock{background:#f7f7f7;padding:8px;margin-bottom:8px;border-radius:6px;}
</style>
</head>
<body>

<div class="container">
<h1>Konfigurator PRO 6.3.3 – ABSOLUTE STABLE</h1>

<label>Typ korpusu</label>
<select id="type" onchange="autoLogic()">
<option>Dolna</option>
<option>Dolna GOLA</option>
<option>Wisząca</option>
<option>Pod zmywarkę</option>
<option>Pod lodówkę</option>
</select>

<label>Konstrukcja</label>
<select id="config" onchange="updateState(); updateDrawerSelectors();">
<option>Drzwi</option>
<option>Szuflady</option>
</select>

<label>Ilość frontów (Drzwi)</label>
<select id="frontCount">
<option value="1">1</option>
<option value="2">2</option>
</select>

<label>System szuflad</label>
<select id="system" onchange="updateDrawerSelectors()">
<option>Antaro</option>
<option>Tandembox</option>
<option>Merivobox</option>
<option>Legrabox</option>
</select>

<label>Ilość szuflad</label>
<input type="number" id="qty" value="3" min="1" onchange="updateDrawerSelectors()">

<div id="drawerSelectors"></div>

<label>Wysokość (mm)</label>
<input type="number" id="height" value="720">

<label>Szerokość (mm)</label>
<input type="number" id="width" value="600">

<label>Głębokość (mm)</label>
<input type="number" id="depth" value="560">

<label>Prowadnica</label>
<select id="runner">
<option>450</option>
<option selected>500</option>
<option>550</option>
</select>

<button class="primary" onclick="calculate()">Oblicz</button>

<div id="result"></div>
</div>

<script>

const systemData = {
Antaro:{ types:{N:68,M:84,C:148,D:196}, minFront:{N:80,M:100,C:160,D:200}, offset:38 },
Tandembox:{ types:{N:68,M:84,C:148,D:196}, minFront:{N:80,M:100,C:160,D:200}, offset:38 },
Merivobox:{ types:{E:90,M:130,K:180,H:250}, minFront:{E:110,M:150,K:200,H:270}, offset:42 },
Legrabox:{ types:{N:66,M:90,C:177,F:241}, minFront:{N:90,M:120,C:190,F:260}, offset:38 }
};

function autoLogic(){

let t=type.value;

if(t==="Wisząca" || t==="Pod zmywarkę" || t==="Pod lodówkę"){
config.value="Drzwi";
config.disabled=true;
}else{
config.disabled=false;
}

if(t==="Wisząca"){ height.value=720; depth.value=320; }
if(t==="Pod zmywarkę"){ height.value=720; depth.value=560; }
if(t==="Pod lodówkę"){ height.value=2130; depth.value=600; }

updateState();
updateDrawerSelectors();
}

function updateState(){
qty.disabled=(config.value==="Drzwi");
frontCount.disabled=(config.value!=="Drzwi");
if(config.value==="Drzwi") qty.value=1;
}

function updateDrawerSelectors(){
drawerSelectors.innerHTML="";
if(config.value!=="Szuflady") return;
let sys=system.value;
for(let i=1;i<=qty.value;i++){
let div=document.createElement("div");
div.className="drawerBlock";
div.innerHTML="<strong>Szuflada "+i+"</strong><br>";
let select=document.createElement("select");
select.id="drawerType_"+i;
for(let t in systemData[sys].types){
let opt=document.createElement("option");
opt.value=t;
opt.text=t+" ("+systemData[sys].types[t]+" mm)";
select.appendChild(opt);
}
div.appendChild(select);
drawerSelectors.appendChild(div);
}
}

function calculate(){

let h=parseInt(height.value);
let w=parseInt(width.value);
let d=parseInt(depth.value);
let r=parseInt(runner.value);
let q=parseInt(qty.value);
let sys=system.value;
let c=config.value;
let typeValue=type.value;
let fc=parseInt(frontCount.value);

let light=w-36;
let gola=(typeValue==="Dolna GOLA")?50:0;

if(w<300||w>1200){ result.innerHTML="<span class='warning'>Szerokość 300–1200 mm</span>"; return; }
if(h<300){ result.innerHTML="<span class='warning'>Minimalna wysokość 300 mm</span>"; return; }
if(d<r+20){ result.innerHTML="<span class='warning'>Za mała głębokość pod prowadnicę</span>"; return; }

if((typeValue==="Wisząca" || typeValue==="Pod zmywarkę" || typeValue==="Pod lodówkę") && c==="Szuflady"){
result.innerHTML="<span class='warning'>Ten typ korpusu nie obsługuje szuflad</span>";
return;
}

/* DRZWI */
if(c==="Drzwi"){

let frontHeight=h-4-gola;

let out="<h2>Wynik</h2><table>";
out+="<tr><th>Element</th><th>Wymiar</th></tr>";
out+="<tr><td>Bok</td><td>"+h+" x "+d+" x 18</td></tr>";
out+="<tr><td>Dno</td><td>"+light+" x "+d+" x 18</td></tr>";
out+="<tr><td>Wieniec</td><td>"+light+" x "+d+" x 18</td></tr>";
out+="<tr><td>Plecy</td><td>"+(w-2)+" x "+(h-2)+" x 3</td></tr>";

if(w>600){ fc=2; frontCount.value=2; }

if(fc===1){
if(w-4>600){ result.innerHTML="<span class='warning'>Front >600 mm</span>"; return; }
out+="<tr><td>Front</td><td>"+(w-4)+" x "+frontHeight+" x 18</td></tr>";
}else{
let single=Math.floor((w-6)/2);
if(single>600){ result.innerHTML="<span class='warning'>Front >600 mm</span>"; return; }
out+="<tr><td>Front L</td><td>"+single+" x "+frontHeight+" x 18</td></tr>";
out+="<tr><td>Front P</td><td>"+single+" x "+frontHeight+" x 18</td></tr>";
}

out+="</table>";
result.innerHTML=out;
return;
}

/* SZUFLADY */

if(c==="Szuflady"){

if(w<350){
result.innerHTML="<span class='warning'>Minimalna szerokość pod szuflady 350 mm</span>";
return;
}

if(h>1500 && q>5){
result.innerHTML="<span class='warning'>Maksymalnie 5 szuflad dla wysokiego korpusu</span>";
return;
}

if(h>1000 && q<2){
result.innerHTML="<span class='warning'>Wysoki korpus wymaga min. 2 szuflad</span>";
return;
}

let frontH=Math.floor((h-gola-((q+1)*3))/q)-4;

if(frontH<=0){
result.innerHTML="<span class='warning'>Za dużo szuflad dla tej wysokości</span>";
return;
}

if(frontH>400){
result.innerHTML="<span class='warning'>Front za wysoki</span>";
return;
}

let out="<h2>Wynik</h2><table>";
out+="<tr><th>Element</th><th>Wymiar</th></tr>";
out+="<tr><td>Bok</td><td>"+h+" x "+d+" x 18</td></tr>";
out+="<tr><td>Dno</td><td>"+light+" x "+d+" x 18</td></tr>";
out+="<tr><td>Wieniec</td><td>"+light+" x "+d+" x 18</td></tr>";
out+="<tr><td>Plecy</td><td>"+(w-2)+" x "+(h-2)+" x 3</td></tr>";

for(let i=1;i<=q;i++){
let typeB=document.getElementById("drawerType_"+i).value;
let backH=systemData[sys].types[typeB];
let minFront=systemData[sys].minFront[typeB];
let offset=systemData[sys].offset;

if(frontH < minFront){
result.innerHTML="<span class='warning'>Szuflada "+i+
" wymaga min frontu "+minFront+" mm</span>";
return;
}

let internal=frontH-backH-20;
if(internal<30){
result.innerHTML="<span class='warning'>Szuflada "+i+
" – za mała wysokość wewnętrzna</span>";
return;
}

let dnoW=light-offset;

out+="<tr><td>Front "+i+"</td><td>"+(w-4)+" x "+frontH+" x 18</td></tr>";
out+="<tr><td>Tył "+i+"</td><td>"+dnoW+" x "+backH+" x 16</td></tr>";
out+="<tr><td>Dno "+i+"</td><td>"+dnoW+" x "+r+" x 16</td></tr>";
out+="<tr><td>Wysokość wewn.</td><td>"+internal+" mm</td></tr>";
}

out+="</table>";
result.innerHTML=out;
}

}

updateDrawerSelectors();
autoLogic();

</script>
</body>
</html>
